# Â¿QuÃ©? Archivo de Docker Compose para orquestar servicios de desarrollo.
# Â¿Para quÃ©? Levantar PostgreSQL 17 con un solo comando, sin instalaciÃ³n local.
# Â¿Impacto? Garantiza que todos los desarrolladores usen la misma versiÃ³n de BD
#           con la misma configuraciÃ³n.

services:
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # ğŸ˜ PostgreSQL 17 â€” Base de datos principal
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  db:
    image: postgres:17-alpine
    container_name: calzado_jyr_db
    restart: unless-stopped

    environment:
      POSTGRES_USER: jyr_user
      POSTGRES_PASSWORD: ""
      POSTGRES_DB: calzado_jyr_db

    ports:
      - "5432:5432"

    volumes:
      - calzado_jyr_data:/var/lib/postgresql/data
      - ./db/init:/docker-entrypoint-initdb.d

    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U jyr_user -d calzado_jyr_db"]
      interval: 10s
      timeout: 5s
      retries: 5

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ“¦ VolÃºmenes nombrados
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
volumes:
  calzado_jyr_data:
